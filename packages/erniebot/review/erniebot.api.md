## API Report File for "@zhengxs/erniebot"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
/// <reference types="node" />

import type { Agent } from 'node:http'

// @public (undocumented)
export const AIStudioBackend: EBBackend

// @public (undocumented)
export class APIClient {
  constructor(options: APIClientOptions)
  // (undocumented)
  protected authHeaders(options: FinalRequestOptions): HTTPHeaders
  // (undocumented)
  baseURL: string
  // (undocumented)
  protected buildURL({ path, query }: FinalRequestOptions): string
  // (undocumented)
  protected calculateContentLength(body: BodyInit | null): string | null
  protected defaultHeaders(options: FinalRequestOptions): HTTPHeaders
  // (undocumented)
  protected defaultQuery(): HTTPSearchParams
  // (undocumented)
  delete<Rsp>(path: string, opts?: APIRequestOptions): APIPromise<Rsp>
  // (undocumented)
  fetch: Fetch
  // (undocumented)
  fetchWithTimeout(
    url: RequestInfo,
    init: RequestInit | undefined,
    ms: number,
    controller: AbortController,
  ): Promise<Response>
  // (undocumented)
  get<Rsp>(path: string, opts?: APIRequestOptions): APIPromise<Rsp>
  // (undocumented)
  protected getRequestClient(): HTTPClient
  // (undocumented)
  protected getUserAgent(): string
  // (undocumented)
  headers?: HTTPHeaders
  // (undocumented)
  httpAgent?: Agent | null
  // (undocumented)
  protected makeStatusError(
    status: number | undefined,
    error: unknown | undefined,
    message: string | undefined,
    headers: Headers | undefined,
  ): APIError
  // (undocumented)
  maxRetries?: number
  // (undocumented)
  protected parseResponse<T>({ response, options, controller }: APIResponseProps): Promise<T>
  // (undocumented)
  patch<Rsp>(path: string, opts?: APIRequestOptions): APIPromise<Rsp>
  // (undocumented)
  post<Rsp>(path: string, opts?: APIRequestOptions): APIPromise<Rsp>
  protected prepareRequest(
    request: RequestInit,
    {
      url,
      options,
    }: {
      url: string
      options: FinalRequestOptions
    },
  ): Promise<void>
  // (undocumented)
  proxy?: string | null
  // (undocumented)
  put<Rsp>(path: string, opts?: APIRequestOptions): APIPromise<Rsp>
  // (undocumented)
  request<Rsp = any>(options: FinalRequestOptions, remainingRetries?: number | null): APIPromise<Rsp>
  // (undocumented)
  timeout: number
  // (undocumented)
  protected validateHeaders(headers: HTTPHeaders, customHeaders: HTTPHeaders): void
}

// @public (undocumented)
export interface APIClientOptions {
  baseURL?: string
  fetch?: Fetch
  headers?: HTTPHeaders
  httpAgent?: Agent | null
  maxRetries?: number
  proxy?: string | null
  timeout?: number
}

// @public (undocumented)
export class APIConnectionError extends APIError {
  constructor({ message, cause }: { message?: string; cause?: Error | undefined })
  // (undocumented)
  readonly status: undefined
}

// @public (undocumented)
export class APIConnectionTimeoutError extends APIConnectionError {
  constructor({ message }?: { message?: string })
}

// @public (undocumented)
export class APIError extends EBError {
  constructor(
    status: number | undefined,
    error: unknown | undefined,
    message: string | undefined,
    headers: Headers | undefined,
  )
  // (undocumented)
  readonly code: string | null | undefined
  // (undocumented)
  readonly error: unknown | undefined
  // (undocumented)
  static generate(
    status: number | undefined,
    errorResponse: unknown | undefined,
    message: string | undefined,
    headers: Headers | undefined,
  ): APIError
  // (undocumented)
  readonly headers: Headers | undefined
  // (undocumented)
  readonly param: string | null | undefined
  // (undocumented)
  readonly status: number | undefined
  // (undocumented)
  readonly type: string | undefined
}

// @public (undocumented)
export interface APIInfo {
  // (undocumented)
  models: {
    [key: string]: {
      modelId: string
    }
  }
  // (undocumented)
  resourceId: string
}

// @public
export class APIPromise<T> extends Promise<T> {
  constructor(responsePromise: Promise<APIResponseProps>, parseResponse: (props: APIResponseProps) => PromiseOrValue<T>)
  // (undocumented)
  asResponse(): Promise<Response>
  // (undocumented)
  catch<TResult = never>(
    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,
  ): Promise<T | TResult>
  // (undocumented)
  finally(onfinally?: (() => void) | undefined | null): Promise<T>
  // (undocumented)
  then<TResult1 = T, TResult2 = never>(
    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,
    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,
  ): Promise<TResult1 | TResult2>
  // (undocumented)
  _thenUnwrap<U>(transform: (data: T) => U): APIPromise<U>
  // (undocumented)
  withResponse(): Promise<{
    data: T
    response: Response
  }>
}

// @public (undocumented)
export type APIRequestOptions = Omit<FinalRequestOptions, 'path' | 'method'>

// @public (undocumented)
export class APIResource {
  constructor(client: APIClient)
  // (undocumented)
  protected client: APIClient
  // (undocumented)
  protected delete: APIClient['delete']
  // (undocumented)
  protected get: APIClient['get']
  // (undocumented)
  protected patch: APIClient['patch']
  // (undocumented)
  protected post: APIClient['post']
  // (undocumented)
  protected put: APIClient['put']
}

// @public (undocumented)
export type APIResponseProps = {
  response: Response
  options: FinalRequestOptions
  controller: AbortController
}

// @public (undocumented)
export type APIType = (string & NonNullable<unknown>) | 'aistudio'

// @public (undocumented)
export class APIUserAbortError extends APIError {
  constructor({ message }?: { message?: string })
  // (undocumented)
  readonly status: undefined
}

// @public (undocumented)
export function calculateContentLength(body: unknown): string | null

// @public (undocumented)
export function calculateDefaultRetryTimeoutMillis(retriesRemaining: number, maxRetries: number): number

// @public (undocumented)
export const castToError: (err: any) => Error

// @public (undocumented)
export class Chat extends APIResource {
  // (undocumented)
  completions: Completions
}

// @public
export interface ChatCompletion {
  created: number
  function_call?: ChatCompletion.FunctionCall
  id: string
  // (undocumented)
  is_truncated: boolean
  // (undocumented)
  need_clear_history: boolean
  object: string
  // (undocumented)
  result: string
  usage: CompletionUsage
}

// @public (undocumented)
export namespace ChatCompletion {
  export interface FunctionCall {
    arguments?: string
    name?: string
    // (undocumented)
    thoughts?: string
  }
}

// @public
export interface ChatCompletionChunk {
  created: number
  function_call?: ChatCompletion.FunctionCall
  id: string
  // (undocumented)
  is_end: boolean
  // (undocumented)
  is_truncated: boolean
  // (undocumented)
  need_clear_history: boolean
  object: string
  // (undocumented)
  result: string
  // (undocumented)
  sentence_id: string
  usage: CompletionUsage
}

// @public (undocumented)
export type ChatCompletionCreateParams = ChatCompletionCreateParamsNonStreaming | ChatCompletionCreateParamsStreaming

// @public (undocumented)
export namespace ChatCompletionCreateParams {
  // Warning: (ae-forgotten-export) The symbol "ChatCompletionCreateParamsBase" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  export interface ChatCompletionCreateParamsNonStreaming extends ChatCompletionCreateParamsBase {
    // (undocumented)
    stream?: false | null
  }
  // (undocumented)
  export interface ChatCompletionCreateParamsStreaming extends ChatCompletionCreateParamsBase {
    // (undocumented)
    stream: true
  }
  // (undocumented)
  export interface Function {
    // (undocumented)
    description?: string
    // (undocumented)
    name: string
    // (undocumented)
    parameters: Record<string, unknown>
    // (undocumented)
    responses?: Record<string, unknown>
  }
  // (undocumented)
  export interface FunctionCallOption {
    // (undocumented)
    name: string
  }
}

// @public (undocumented)
export type ChatCompletionCreateParamsNonStreaming = ChatCompletionCreateParams.ChatCompletionCreateParamsNonStreaming

// @public (undocumented)
export type ChatCompletionCreateParamsStreaming = ChatCompletionCreateParams.ChatCompletionCreateParamsStreaming

// @public
export interface ChatCompletionMessage {
  content: string | null
  function_call?: ChatCompletionMessage.FunctionCall
  role: ChatCompletionRole
}

// @public (undocumented)
export namespace ChatCompletionMessage {
  export interface FunctionCall {
    // (undocumented)
    arguments: string
    // (undocumented)
    name: string
  }
}

// @public (undocumented)
export interface ChatCompletionMessageParam {
  content: string | null
  function_call?: ChatCompletionMessageParam.FunctionCall
  name?: string
  role: 'system' | 'user' | 'assistant' | 'function'
}

// @public (undocumented)
export namespace ChatCompletionMessageParam {
  export interface FunctionCall {
    arguments: string
    name: string
  }
}

// @public
export type ChatCompletionRole = 'system' | 'user' | 'assistant' | 'function'

// @public (undocumented)
export class Completions extends APIResource {
  create(body: ChatCompletionCreateParamsNonStreaming, options?: APIRequestOptions): APIPromise<ChatCompletion>
  // (undocumented)
  create(
    body: ChatCompletionCreateParamsStreaming,
    options?: APIRequestOptions,
  ): APIPromise<Stream<ChatCompletionChunk>>
  // (undocumented)
  create(
    body: ChatCompletionCreateParamsBase,
    options?: APIRequestOptions,
  ): APIPromise<Stream<ChatCompletionChunk> | ChatCompletion>
}

// @public
export interface CompletionUsage {
  completion_tokens: number
  prompt_tokens: number
  total_tokens: number
}

// @public (undocumented)
export interface CreateEmbeddingResponse {
  // (undocumented)
  data: Array<Embedding>
  // (undocumented)
  model: string
  // (undocumented)
  object: string
  // (undocumented)
  usage: CreateEmbeddingResponse.Usage
}

// @public (undocumented)
export namespace CreateEmbeddingResponse {
  // (undocumented)
  export interface Usage {
    // (undocumented)
    prompt_tokens: number
    // (undocumented)
    total_tokens: number
  }
}

// @public (undocumented)
export const createResponseHeaders: (headers: Awaited<ReturnType<Fetch>>['headers']) => Record<string, string>

// @public (undocumented)
export function debug(action: string, ...args: any[]): void

// @public (undocumented)
export interface EBBackend {
  // (undocumented)
  apiType: string
  // (undocumented)
  baseURL: string
  // (undocumented)
  parseResponse: (props: APIResponseProps) => PromiseOrValue<any>
  // (undocumented)
  resources: Record<string, APIInfo>
}

// @public (undocumented)
export class EBError extends Error {}

// @public (undocumented)
export interface EBOptions extends APIClientOptions {
  ak?: string | null
  apiType?: APIType
  dangerouslyAllowBrowser?: boolean
  sk?: string | null
  token?: string | null
}

// @public (undocumented)
export interface Embedding {
  // (undocumented)
  embedding: Array<number>
  // (undocumented)
  index: number
  // (undocumented)
  object: string
}

// @public (undocumented)
export interface EmbeddingCreateParams {
  // (undocumented)
  input: string | Array<string> | Array<number> | Array<Array<number>>
  // (undocumented)
  model: string
}

// @public (undocumented)
export class Embeddings extends APIResource {
  // (undocumented)
  create(body: EmbeddingCreateParams, options?: APIRequestOptions): APIPromise<CreateEmbeddingResponse>
}

// @public (undocumented)
export class ErnieBot extends APIClient {
  constructor(options: EBOptions)
  // (undocumented)
  get apiType(): APIType
  set apiType(apiType: APIType)
  // (undocumented)
  protected authHeaders(): {
    authorization: string
  }
  // (undocumented)
  static backends: Record<string, EBBackend>
  // (undocumented)
  protected buildURL(options: FinalRequestOptions): string
  // (undocumented)
  chat: Chat
  // (undocumented)
  embeddings: Embeddings
  // (undocumented)
  protected getUserAgent(): string
  // (undocumented)
  static makeBackend(apiType: APIType): EBBackend
  // (undocumented)
  options: EBOptions
  // (undocumented)
  protected parseResponse(props: APIResponseProps): any
  // (undocumented)
  static version: string
}

// @public (undocumented)
export type Fetch = (url: RequestInfo, init?: RequestInit) => Promise<Response>

// @public (undocumented)
export interface FinalRequestOptions<Body = any> extends Omit<RequestInit, 'body' | 'headers'> {
  // (undocumented)
  body?: Body | Record<'body', BodyInit | null> | null
  // (undocumented)
  headers?: HTTPHeaders
  // (undocumented)
  httpAgent?: Agent
  // (undocumented)
  maxRetries?: number
  // (undocumented)
  path: string
  // (undocumented)
  query?: HTTPSearchParams
  // (undocumented)
  stream?: boolean
  // (undocumented)
  timeout?: number
}

// @public
export const getGlobalObject: <T>() => T

// @public (undocumented)
export const globalObject: Window & typeof globalThis

// @public (undocumented)
export type HTTPClient = {
  fetch: Fetch
}

// @public (undocumented)
export type HTTPHeaders = Record<string, string>

// @public (undocumented)
export type HTTPMethods = 'get' | 'post' | 'put' | 'patch' | 'delete'

// @public (undocumented)
export type HTTPSearchParams = URLSearchParams | Record<string, string>

// @public
export const inBrowser: boolean

// @public (undocumented)
export const inDeno: boolean

// @public
export const inNode: boolean

// @public (undocumented)
export class InvalidArgumentError extends EBError {}

// @public (undocumented)
export const isMultipartBody: (body: any) => body is MultipartBody

// @public (undocumented)
export function mergeHTTPSearchParams(
  target: HTTPSearchParams | undefined | null,
  source: HTTPSearchParams | undefined | null,
): URLSearchParams

// @public (undocumented)
export class MultipartBody {
  // (undocumented)
  get [Symbol.toStringTag](): string
  constructor(body: any)
  // (undocumented)
  body: any
}

// @public (undocumented)
export type PromiseOrValue<T> = T | Promise<T>

// @public (undocumented)
export const readEnv: (env: string) => string | undefined

// @public (undocumented)
export const safeJSON: (text: string) => any

// @public (undocumented)
export const sleep: (ms: number) => Promise<unknown>

// @public (undocumented)
export class Stream<Item> implements AsyncIterable<Item> {
  // (undocumented)
  [Symbol.asyncIterator](): AsyncIterator<Item>
  constructor(iterator: () => AsyncIterator<Item>, controller: AbortController)
  // (undocumented)
  controller: AbortController
  // (undocumented)
  static fromReadableStream<Item>(readableStream: ReadableStream, controller: AbortController): Stream<Item>
  // (undocumented)
  static fromSSEResponse<Item>(response: Response, controller: AbortController): Stream<Item>
  // (undocumented)
  tee(): [Stream<Item>, Stream<Item>]
  // (undocumented)
  toReadableStream(): ReadableStream
}

// @public (undocumented)
export class UnsupportedAPITypeError extends EBError {}

// (No @packageDocumentation comment for this package)
```
